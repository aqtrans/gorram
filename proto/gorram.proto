syntax = "proto3";

package gorram;

service Reporter {
    rpc Ping(IsAlive) returns (IsAlive) {}
    rpc RecordIssue(stream Issue) returns (Submitted) {}
    rpc SendConfig(ConfigRequest) returns (Config) {}
}

message IsAlive {
    bool is_alive = 1;
}

message Submitted {
    bool successfully_submitted = 1;
}

message Issue {
    // Message itself
    string message = 1;
    // When issue was sent
    int64 time_submitted = 2;
}

message Config {
    // Raw config file
    bytes cfg = 1;
}

message ConfigRequest {
    string client_name = 1;
    string cfg_sha1sum = 2;
}
